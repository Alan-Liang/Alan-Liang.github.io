<html>
<head>
<title> </title>
<meta name="viewport" content="width=500,user-scalable=no" />
</head>
<style>
.a{font-size:70px;}
.b{font-size:40px;}
#tip{background:#000;opacity:0.2;top:0;left:0;width:100%;height:100%;position:fixed;}
.hidden{display:none;}
h1{color:#fff;font-family:黑体;font-size:100px;text-align:center;/*vertical-align:middle;*/}
</style>
<body>
<img src="i.jpg" alt="地图" />
<div id="tip" class="hidden"></div>
<div style="height:20px;width:20px;background:red;position:fixed;opacity:0.3;left:261;top:407;" id="point"></div>
<script>var p=document.getElementById('point');
var ti=document.getElementById('tip');
var a="";
//window.onmousemove=function(e){point.style.top=e.pageY-10;point.style.left=e.pageX-10;};
//window.onmousedown=function(e){console.info(e.pageY+" "+e.pageX+" ");a=a+e.pageY+" "+e.pageX+" ";console.warn(a);}
var b="417 271 311 323 232 168 155 153 71 142 39 331 142 277 303 196 152 188 229 258 339 161 383 236".split(" ");
var i=1;

b="415 272 397 346 310 322 236 298 231 171 209 174 130 171 106 142 64 143 17 259 28 300 48 312 37 333 73 332 75 312 93 308 103 283 117 278 142 269 122 283 138 225 295 243 303 199 297 245 136 228 126 191 145 164 154 187 144 165 127 195 136 224 242 240 227 261 241 241 243 219 298 194 337 158 299 199 320 208 318 235 333 217 382 224 375 241 378 225 325 216 323 233 313 232 323 207 298 196 274 228 243 223 238 291 315 325 398 347 414 270".split(" ");

//提示语句
var tips="下地铁了<br /><span class='a'>点击以继续</span>``起点``第一个点<br /><span class='a'><span style='font-size:10px;'</span>sb</span>的编花篮</span>``第二个点``第三个点<br /><span class='b'>我们说，4.2m，肖老师说，不对，我们说，3m，肖老师说，不对，我们说，3.5m，肖老师说，有误差，老师给我们讲了一遍，让我们走了</span>``第四个点<br /><span class='a'>老师说，和标答不一样</span>``我走在前面，其他人找不到我了``第五个点``第六个点``第七个点(胡老师)<br /><span class='a'>很难找到的一个点，虽然我们早就找到了，但答题又用了10分钟。</span>``第八个点<br /><span class='a'>很简单就找到了</span>``第九个点``最后一个点``终点<br /><span class='a'>我们都找不到廉天浩了</span>``谢谢观赏".split("``");//unfinished

window.showtip=function(a){ti.className='';ti.innerHTML='<h1>'+tips[a]+'</h1>';};

window.showtip(0);

abc=1;

var stopPointId=[3,5,7,9,13,18,19,23,28,33,37,43,53,55];

function animate(elem, options){
	var onc=function(){
animate(p,{top:parseInt(b[2*i])-10,left:parseInt(b[2*i+1])-10,duration:2000});i++;if(i>=b.length/2)i=0;
ti.className="hidden";};
	//动画初始值
	var start = parseInt(elem.style['left'].replace('px',''));
	var startt=parseInt(elem.style['top'].replace('px',''));
	//动画结束值
	var end = options.left;
	var endd=options.top;
	var bet=Math.sqrt(Math.abs(endd-startt)*Math.abs(endd-startt)+Math.abs(end-start)*Math.abs(end-start));
	var dur=bet*10;
	var state=false;
	for(var c=0;c<=stopPointId.length;c++){
	if(stopPointId[c]==(i+1))state=true;
	}if(!state)setTimeout(function(){onc();},dur);
	else {abc++;
	setTimeout(function(){window.showtip(abc-1);},dur);}
	state=false;
	//动画id
	var timerId;
	var createTime = function(){
		return  (+new Date);
	}
	//动画开始时间
	var startTime = createTime();

	function tick(){
		//每次变化的时间
		var remaining = Math.max(0, startTime + dur - createTime())
		var temp = remaining / dur || 0;
		var percent = 1 - temp;
		var stop = function(){
			//停止动画
			clearInterval(timerId);
			timerId = null;
			window.onclick=onc;	
		}
		var setStyle = function(value,valuee){
			window.onclick=null;
			elem.style['left'] = value + 'px';
			elem.style['top']=valuee+'px';
		}
		//移动的距离
		var now = (end - start) * percent + start;
		var noww = (endd - startt) * percent + startt;
		if(percent === 1){
			setStyle(now,noww);
			stop();
		}else{
			setStyle(now,noww);
		}
	}

	//开始执行动画
	var timerId = setInterval(tick, 5);
}

window.onclick=function(){
animate(p,{top:parseInt(b[2*i])-10,left:parseInt(b[2*i+1])-10,duration:2000});i++;if(i>=b.length/2)i=0;
ti.className="hidden";}



</script>
</body>
